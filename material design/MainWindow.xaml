<Window x:Class="material_design.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:material_design"
        mc:Ignorable="d"
        Title="Управление персоналом кафе-бара" 
        Height="700" Width="1200">
    
    <Window.Resources>
        <local:ByteArrayToImageConverter x:Key="ByteArrayToImageConverter"/>
    </Window.Resources>
    
   


    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#FF3F51B5" Padding="16">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="👥" FontSize="24" Margin="0,0,16,0" Foreground="White"/>
                <TextBlock Text="Управление персоналом" 
                          FontSize="20" FontWeight="Bold"
                          Foreground="White"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Data Grid -->
            <DataGrid Name="dgProduct" Grid.Column="0" MouseDoubleClick="dgProduct_MouseDoubleClick"
                     ItemsSource="{Binding Employees}" AutoGenerateColumns="False">
                <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding id_employee}" Header="ID" Width="Auto"/>
                    <DataGridTextColumn Binding="{Binding name_employee}" Header="Сотрудник" Width="*"/>
                    <DataGridTextColumn Binding="{Binding ph_number_emp}" Header="Телефон" Width="Auto"/>
                    <DataGridTextColumn Binding="{Binding title_post}" Header="Должность" Width="Auto"/>
                    <DataGridTextColumn Binding="{Binding email}" Header="Email" Width="*"/>
                    <DataGridTemplateColumn Header="Фото" Width="Auto">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Image Source="{Binding photo_data, Converter={StaticResource ByteArrayToImageConverter}}" 
                       Width="40" Height="40" Stretch="Uniform"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>

            <!-- Form Panel -->
            <Border Grid.Column="1" Width="350" Margin="8" Padding="16" Background="#FFF5F5F5" CornerRadius="4">
                <StackPanel>
                    <TextBlock Text="Редактирование сотрудника" 
                              FontSize="16" FontWeight="Medium"
                              Margin="0,0,0,16"/>

                    <!-- ID Field -->
                    <TextBox Name="tbId" ToolTip="ID сотрудника"/>

                    <!-- Name Field -->
                    <TextBox Name="tbName" ToolTip="ФИО сотрудника" Margin="0,16,0,0"/>

                    <!-- Phone Field -->
                    <TextBox Name="tbNumber" ToolTip="Номер телефона" Margin="0,16,0,0"/>

                    <!-- Post Field -->
                    <TextBox Name="tbpost" ToolTip="Должность (ID)" Margin="0,16,0,0"/>

                    <!-- Email Field -->
                    <TextBox Name="tbEmail" ToolTip="Email" Margin="0,16,0,0"/>
                    <!-- Photo Field -->
                    <StackPanel Margin="0,16,0,0">
                        <Image x:Name="imgEmployee" Width="100" Height="100" Stretch="Uniform"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <Button Content="Выбрать фото" Click="SelectPhoto_Click" Margin="0,5,5,0"/>
                            <Button Content="Удалить фото" Click="RemovePhoto_Click" Margin="5,5,0,0"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- CRUD Buttons -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,24,0,0">
                        <Button Content="Добавить" Click="Button_Click" Background="#FF3F51B5" Foreground="White" Padding="8"/>
                        <Button Content="Удалить" Click="Button_Click_1" Margin="8,0,0,0" Padding="8"/>
                    </StackPanel>

                    <!-- Import/Export Buttons -->
                    <!--<StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
                        <Button Content="Импорт" Click="ImportButton_Click" Background="#FF4CAF50" Foreground="White" Padding="8"/>
                        <Button Content="Экспорт CSV" Click="ExportCsvButton_Click"  Background="DarkOrange" Foreground="White" Margin="8,0,0,0" Padding="8"/>
                    </StackPanel>

                    --><!-- Backup Buttons --><!--
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
                        <Button Content="Резервная копия" Click="BackupButton_Click" Padding="8"/>
                        <Button Content="Восстановить" Click="RestoreButton_Click" Margin="8,0,0,0" Padding="8"/>
                    </StackPanel>-->
                </StackPanel>
            </Border>
        </Grid>

        <!-- Footer -->
        <Border Grid.Row="2" Padding="8" Background="#FFEEEEEE">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Главное меню" Click="MainMenuButton_Click" Padding="8"/>

            </StackPanel>
        </Border>
    </Grid>
</Window>